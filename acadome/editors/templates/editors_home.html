{% extends '_base.html' %}

{% block meta %}
<link href="{{ url_for('static', filename='css/forms.css') }}" rel='stylesheet' type='text/css'>
<link href="{{ url_for('articles.static', filename='style.css') }}" rel='stylesheet' type='text/css'>
<script defer src="{{ url_for('editors.static', filename='main.js') }}" type='text/javascript'></script>
{% endblock meta %}

{% block content %}
<main class='search-results hidden'>
  <form action="{{ url_for('editors.home') }}" method='GET' id='field-form'>
    <select name='field'>
      <option value='article'>All fields</option>
      {% for field in fields %}
      <option value="{{ field['name'] }}">{{ field['name'] }}</option>
      {% endfor %}
    </select>
  </form>

  <section class='search-grid'>
    {% for article in articles %}
    <div class="article {{ article['field'] }}">
      <p class='small'>
        <span>{{ article['submitted'].strftime('%d %b %Y') }} | </span>
        {% for author in article['authors'] %}
        {% if author == article['authors'][-1] %}
        <span>{{ author }}</span>
        {% else %}
        <span>{{ author }}, </span>
        {% endif %}
        {% endfor %}
      </p>
      <p>
        <a href="{{ url_for('editors.article', id=article['id']) }}" class='blue'>{{ article['title'] }}</a>
      </p>
    </div>
    {% endfor %}
  </section>

  <section class='no-results hidden'>
    <span>There are no articles in the queue.</span>
  </section>
</main>
{% endblock content %}
