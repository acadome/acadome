{% extends '_base.html' %}

{% block meta %}
<link rel='stylesheet' href="{{ url_for('static', filename='css/forms.css') }}" type='text/css'>
<link rel='stylesheet' href="{{ url_for('articles.static', filename='style.css') }}" type='text/css'>
<script defer src="{{ url_for('articles.static', filename='main.js') }}" type='text/javascript'></script>
{% endblock meta %}

{% block content %}
<section id='search-bar'>
  <form action="{{ url_for('articles.home') }}" method='GET' autocomplete='off' name='search-form' id='search-form'>
    <div class='fields-flex'>
      <input type='search' name='search' id='search' placeholder='Search database' value='{{ query }}'>
      <button type='submit' class='btn'>
        <img src="{{ url_for('static', filename='images/search.png') }}" width='16px' height='16px'>
      </button>
    </div>
  </form>
</section>

<section id='search-grid'>
  {% for article in articles %}
  <div class='article hidden'>
    <p class='small'>
      <span>{{ article['year'] }} | </span>
      {% for author in article['authors'] %}
      {% if author == article['authors'][-1] %}
      <span><a href="{{ url_for('articles.author_search', author=author.replace(' ', '_')) }}" class='anchor-3'>{{ author }}</a></span>
      {% else %}
      <span><a href="{{ url_for('articles.author_search', author=author.replace(' ', '_')) }}" class='anchor-3'>{{ author }}</a>, </span>
      {% endif %}
      {% endfor %}
    </p>
    <p>
      <a href="{{ url_for('articles.article', ref=article['ref']) }}" class='anchor-3'>{{ article['title'] }}</a>
    </p>
  </div>
  {% endfor %}
</section>

<section id='no-results' class='hidden'>
  <span>There are no results for your search query.</span>
</section>

<ul id='pagin' class='hidden'>
  <li><a></a></li>
  <li></li>
  <li><a></a></li>
</ul>
{% endblock content %}
