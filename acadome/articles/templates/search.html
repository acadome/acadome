{% extends '_base.html' %}

{% block meta %}
<link rel='stylesheet' href="{{ url_for('static', filename='css/forms.css') }}" type='text/css'>
<link rel='stylesheet' href="{{ url_for('articles.static', filename='style.css') }}" type='text/css'>
<script defer src="{{ url_for('articles.static', filename='main.js') }}" type='text/javascript'></script>
{% endblock meta %}

{% block content %}
<main class='search-results hidden'>
  <form action="{{ url_for('articles.home') }}" method='GET' autocomplete='off' id='search-form'>
    <div class='fields-flex'>
      <input type='search' name='search' placeholder='Search database' value='{{ query }}'>
      <button type='submit' class='btn'>
        <img src="{{ url_for('static', filename='images/search.png') }}" width='16px' height='16px'>
      </button>
    </div>
  </form>

  <section class='search-grid'>
    {% for article in articles %}
    <div class='article hidden'>
      <p class='small'>
        {% if article['preprint'] %}
        <span>{{ article['accepted'].strftime('%d %b %Y') }} | </span>
        {% else %}
        <span>{{ article['published'].strftime('%d %b %Y') }} | </span>
        {% endif %}
        {% for author in article['authors'] %}
        {% if author == article['authors'][-1] %}
        <span><a href="{{ url_for('articles.author_search', author=author.replace(' ', '_')) }}" class='blue'>{{ author }}</a></span>
        {% else %}
        <span><a href="{{ url_for('articles.author_search', author=author.replace(' ', '_')) }}" class='blue'>{{ author }}</a>, </span>
        {% endif %}
        {% endfor %}
      </p>
      <p>
        {% if article['preprint'] %}
        <span class='preprint small'>Preprint</span>
        {% endif %}
        <a href="{{ url_for('articles.article', id=article['id']) }}" class='blue'>{{ article['title'] }}</a>
      </p>
    </div>
    {% endfor %}
  </section>

  <section class='no-results hidden'>
    <span>There are no results for your search query.</span>
  </section>

  <ul class='pagin hidden'>
    <li><a></a></li>
    <li></li>
    <li><a></a></li>
  </ul>
</main>
{% endblock content %}
