{% extends '_base.html' %}
{% from '_form_field.html' import render_field %}

{% block meta %}
<link rel='stylesheet' href="{{ url_for('static', filename='css/forms.css') }}" type='text/css'>
<link rel='stylesheet' href="{{ url_for('gen.static', filename='style.css') }}" type='text/css'>
<script defer src="{{ url_for('gen.static', filename='forms.js') }}" type='text/javascript'></script>
{% endblock meta %}

{% block content %}
<div class='form-grid'>
  <section class='blue-bg info'>
    <h2>The editorial workflow</h2>
    <ol class='list'>
      <li>Submit your manuscript via the adjacent form. You will receive an email of confirmation.</li>
      <li>Following a preliminary check, our editor will get back to you.</li>
      <li>Your manuscript will pass through two peer reviews.</li>
      <li>The editor will format and upload your manuscript as a published research article.</li>
    </ol>
  </section>

  <section class='form'>
    <form action="{{ url_for('gen.publish') }}" method='POST' autocomplete='off' enctype='multipart/form-data' name='publish-form'>
      <h2>Send us your manuscript</h2>
      {{ form.csrf_token }}
      {{ render_field(form.name) }}
      {{ render_field(form.email) }}
      {{ render_field(form.affiliation) }}
      <div class='field'>
        <div class='fields-flex'>
          <div>
            {{ form.file.label(class='btn', tabindex=0) }}
            {{ form.file(id='file', class='hidden') }}
          </div>
          <input type='text' name='file-name' id='file-name' disabled>
        </div>
        <div class='field-error-desc small'>
          <span id='file-error'></span><br>
        </div>
      </div>
      <div class='field fields-flex'>
        <div>
          {% if form.agreement.errors %}
          {{ form.agreement(class='field-error') }}
          {% else %}
          {{ form.agreement }}
          {% endif %}
          <label for='agreement' id='agreement'>
            I accept the <a href="{{ url_for('gen.agreement') }}" class='anchor-1' target='_blank'>publishing agreement</a>.
          </label>
        </div>
        <button type='submit' class='btn'>Submit</button>
      </div>
      <img src="{{ url_for('static', filename='gifs/spinner.gif') }}" width='24px' height='24px' id='spinner'>
    </form>
  </section>
</div>
{% endblock content %}
