{% extends '_base.html' %}

{% block logo %}
        <img src="{{ url_for('static', filename='images/logo_200x116.png') }}" alt='AcaDome logo' id='logo'>
{% endblock logo %}

{% block content %}
      <form action='' method='GET' autocomplete='off' name='search-form' id='search-form'>
        <input type='search' name='search' id='search' value='{{ query }}'>
        <button type='submit' class='btn'>
          <img src="{{ url_for('static', filename='images/search.png') }}" id='search-icon'>
        </button>
      </form>

      <section id='resp-3'>
        {% for article in articles.items %}
        <article>
          <div class='meta'>
            <div>
              {% for author in article.authors %}
                {% if author == article.authors[-1] %}
                  <span><a href="{{ url_for('profile', author=author.lower().replace(' ', '_')) }}" class='anchor-3'>{{ author }}</a></span>
                {% else %}
                  <span><a href="{{ url_for('profile', author=author.lower().replace(' ', '_')) }}" class='anchor-3'>{{ author }}</a>, </span>
                {% endif %}
              {% endfor %}
            </div>
            <span>{{ article.year }}</span>
          </div>
          <h3><a href="{{ url_for('static', filename='pdfs/articles/' + article.title + '.pdf') }}" class='anchor-3' target='_blank'>{{ article.title }}</a></h3>
          <div class='expand'>
            <p>Abstract: {{ article.abstract }}</p>
            <span>Keywords: </span>
            {% for kw in article.keywords %}
              {% if kw == article.keywords[-1] %}
                <span>{{ kw }}</span>
              {% else %}
                <span>{{ kw }}, </span>
              {% endif %}
            {% endfor %}<br>
            <span>DOI: <a href=''></a></span><br>
            {% if article.count %}
              <span>Cited by: {{ article.count }}</span>
            {% endif %}
          </div>
        </article>
        {% endfor %}
      </section>

      <div id='grid-2'>
        <section>
          {% for article in column1 %}
            <article>
              <div class='meta'>
                <div>
                  {% for author in article.authors %}
                    {% if author == article.authors[-1] %}
                      <span><a href="{{ url_for('profile', author=author.lower().replace(' ', '_')) }}" class='anchor-3'>{{ author }}</a></span>
                    {% else %}
                      <span><a href="{{ url_for('profile', author=author.lower().replace(' ', '_')) }}" class='anchor-3'>{{ author }}</a>, </span>
                    {% endif %}
                  {% endfor %}
                </div>
                <span>{{ article.year }}</span>
              </div>
              <h3><a href="{{ url_for('static', filename='pdfs/articles/' + article.title + '.pdf') }}" class='anchor-3' target='_blank'>{{ article.title }}</a></h3>
              <div class='expand'>
                <p>Abstract: {{ article.abstract }}</p>
                <span>Keywords: </span>
                {% for kw in article.keywords %}
                  {% if kw == article.keywords[-1] %}
                    <span>{{ kw }}</span>
                  {% else %}
                    <span>{{ kw }}, </span>
                  {% endif %}
                {% endfor %}<br>
                <span>DOI: <a href=''></a></span><br>
                {% if article.count %}
                  <span>Cited by: {{ article.count }}</span>
                {% endif %}
              </div>
            </article>
          {% endfor %}
        </section>

        <section>
          {% for article in column2 %}
            <article>
              <div class='meta'>
                <div>
                  {% for author in article.authors %}
                    {% if author == article.authors[-1] %}
                      <span><a href="{{ url_for('profile', author=author.lower().replace(' ', '_')) }}" class='anchor-3'>{{ author }}</a></span>
                    {% else %}
                      <span><a href="{{ url_for('profile', author=author.lower().replace(' ', '_')) }}" class='anchor-3'>{{ author }}</a>, </span>
                    {% endif %}
                  {% endfor %}
                </div>
                <span>{{ article.year }}</span>
              </div>
              <h3><a href="{{ url_for('static', filename='pdfs/articles/' + article.title + '.pdf') }}" class='anchor-3' target='_blank'>{{ article.title }}</a></h3>
              <div class='expand'>
                <p>Abstract: {{ article.abstract }}</p>
                <span>Keywords: </span>
                {% for kw in article.keywords %}
                  {% if kw == article.keywords[-1] %}
                    <span>{{ kw }}</span>
                  {% else %}
                    <span>{{ kw }}, </span>
                  {% endif %}
                {% endfor %}<br>
                <span>DOI: <a href=''></a></span><br>
                {% if article.count %}
                  <span>Cited by: {{ article.count }}</span>
                {% endif %}
              </div>
            </article>
          {% endfor %}
        </section>
      </div>

      {% if not articles.total %}
        <section id='no-results'>
          <span>There are no results for your search query.</span>
        </section>
      {% endif %}

      {% if articles.total > articles.per_page %}
        <ul id='pagin'>
          {% if articles.has_prev %}
            <li><a href="{{ url_for('home', search=query, page=articles.page-1) }}" class='anchor-3'>Prev</a></li>
          {% else %}
            <li></li>
          {% endif %}
          {% if articles.has_next %}
            <li><a href="{{ url_for('home', search=query, page=articles.page+1) }}" class='anchor-3'>Next</a></li>
          {% else %}
            <li></li>
          {% endif %}
        </ul>
      {% endif %}
{% endblock content %}
